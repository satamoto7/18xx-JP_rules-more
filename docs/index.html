---
layout: default
title: ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
---

<div class="search-section">
  <input type="text" class="search-bar" placeholder="ã‚²ãƒ¼ãƒ åã§æ¤œç´¢â€¦" id="searchInput">
  <div class="filter-buttons">
    <button class="filter-btn active" data-filter="all">ã™ã¹ã¦</button>
    <button class="filter-btn" data-filter="beginner">åˆå¿ƒè€…å‘ã‘</button>
    <button class="filter-btn" data-filter="intermediate">çµŒé¨“è€…å‘ã‘</button>
    <button class="filter-btn" data-filter="expert">ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆå‘ã‘</button>
  </div>
</div>

<div class="game-grid" id="gameGrid">
  {% for game in site.data.games.games %}
  <div class="game-card" tabindex="0" data-difficulty="{{ game.difficulty }}" data-title="{{ game.title | downcase }}" data-rules-url="{{ game.rulesUrl }}" data-summary-url="{{ game.summaryUrl }}">
    <div class="game-image">
      {% if game.image %}
        <img src="{{ '/assets/images/' | append: game.image | relative_url }}"
             alt="{{ game.title }}"
             loading="lazy"
             onerror="this.style.display='none'; this.parentElement.innerHTML='ğŸ²';">
      {% else %}
        ğŸ²
      {% endif %}
    </div>
    <div class="game-info">
      <div class="game-title">{{ game.title }}</div>
      <div class="game-difficulty difficulty-{{ game.difficulty }}">{{ game.difficultyText }}</div>
    </div>
    <div class="game-meta" style="display: none;">
      <span class="players">{{ game.players }}</span>
      <span class="time">{{ game.time }}</span>
      <span class="age">{{ game.age }}</span>
      <span class="description">{{ game.description }}</span>
      <span class="id">{{ game.id }}</span>
    </div>
  </div>
  {% endfor %}
</div>

<!-- ã‚²ãƒ¼ãƒ è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="gameModal" class="modal" style="display: none;">
  <div class="modal-overlay" onclick="closeModal()"></div>
  <div class="modal-content" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h2 id="modalTitle">ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«</h2>
      <button class="close-btn" aria-label="é–‰ã˜ã‚‹" onclick="closeModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="detail-header">
        <div class="detail-image" id="modalImage">ğŸ²</div>
        <div class="detail-info">
          <div class="meta-info">
            <p>ãƒ—ãƒ¬ã‚¤äººæ•°: <span id="modalPlayers">2-4äºº</span></p>
            <p>ãƒ—ãƒ¬ã‚¤æ™‚é–“: <span id="modalTime">30-60åˆ†</span></p>
            <p>å¯¾è±¡å¹´é½¢: <span id="modalAge">10æ­³ä»¥ä¸Š</span></p>
            <p>é›£æ˜“åº¦: <span id="modalDifficulty">åˆå¿ƒè€…å‘ã‘</span></p>
          </div>
        </div>
      </div>
      <div class="description" id="modalDescription">
        <p>ã‚²ãƒ¼ãƒ ã®èª¬æ˜ãŒã“ã“ã«å…¥ã‚Šã¾ã™ã€‚</p>
      </div>
      <div class="download-section">
        <h3>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h3>
        <div class="download-links">
          <a href="#" class="download-btn" id="modalRulesLink">
            ğŸ“„ ãƒ«ãƒ¼ãƒ«å’Œè¨³ (PDF)
          </a>
          <a href="#" class="download-btn secondary" id="modalSummaryLink">
            ğŸ“‹ ã‚µãƒãƒªãƒ¼ã‚·ãƒ¼ãƒˆ (PDF)
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// ãƒ™ãƒ¼ã‚¹URLã‚’å–å¾—
const baseUrl = '{{ site.baseurl }}';

let currentFilter = 'all';
let searchTerm = '';

// æ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
function filterGames() {
  const cards = document.querySelectorAll('.game-card');
  
  cards.forEach(card => {
    const title = card.dataset.title;
    const difficulty = card.dataset.difficulty;
    
    const matchesSearch = title.includes(searchTerm.toLowerCase());
    const matchesFilter = currentFilter === 'all' || difficulty === currentFilter;
    
    if (matchesSearch && matchesFilter) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}

// ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã®å‡¦ç†
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    document.querySelector('.filter-btn.active').classList.remove('active');
    this.classList.add('active');
    currentFilter = this.dataset.filter;
    filterGames();
  });
});

// æ¤œç´¢ãƒãƒ¼ã®å‡¦ç†
function debounce(fn, wait = 200) {
   let t; return (...args) => {
     clearTimeout(t); t = setTimeout(() => fn.apply(this, args), wait);
   };
 }
document.getElementById('searchInput').addEventListener('input', debounce(function(e) {
  searchTerm = e.target.value;
  filterGames();
}));

// ã‚²ãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†
document.querySelectorAll('.game-card').forEach(card => {
  card.addEventListener('click', function() {
    const title = this.querySelector('.game-title').textContent;
    const players = this.querySelector('.players').textContent;
    const time = this.querySelector('.time').textContent;
    const age = this.querySelector('.age').textContent;
    const difficulty = this.querySelector('.game-difficulty').textContent;
    const difficultyClass = this.querySelector('.game-difficulty').className;
    const description = this.querySelector('.description').textContent;
    const gameId = this.querySelector('.id').textContent;
    const image = this.querySelector('.game-image img');
    const rulesUrl = this.dataset.rulesUrl;
    const summaryUrl = this.dataset.summaryUrl;
    
    showGameModal({
      title: title,
      players: players,
      time: time,
      age: age,
      difficultyText: difficulty,
      difficulty: difficultyClass.replace('game-difficulty difficulty-', ''),
      description: description,
      id: gameId,
      imageSrc: image ? image.src : null,
      rulesUrl: rulesUrl,
      summaryUrl: summaryUrl
    });
  });

    /* â‘¡ è¿½åŠ ï¼šEnter / Space ã§ã‚‚ã‚¯ãƒªãƒƒã‚¯ã¨åŒã˜å‹•ãã‚’ã•ã›ã‚‹ */
  card.addEventListener('keydown', function(e) {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();   // Space æŠ¼ä¸‹æ™‚ã®ãƒšãƒ¼ã‚¸ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æŠ‘æ­¢
      this.click();         // æ—¢å­˜ã® click å‡¦ç†ã‚’å†åˆ©ç”¨
    }
  });
});

// ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
function showGameModal(game) {
  document.getElementById('modalTitle').textContent = game.title;
  document.getElementById('modalPlayers').textContent = game.players;
  document.getElementById('modalTime').textContent = game.time;
  document.getElementById('modalAge').textContent = game.age;
  document.getElementById('modalDifficulty').textContent = game.difficultyText;
  document.getElementById('modalDifficulty').className = `difficulty-${game.difficulty}`;
  document.getElementById('modalDescription').innerHTML = `<p>${game.description}</p>`;
  
  // ç”»åƒã®è¨­å®š
  const modalImage = document.getElementById('modalImage');
  if (game.imageSrc) {
    modalImage.innerHTML = `<img src="${game.imageSrc}" alt="${game.title}" loading="lazy" onerror="this.style.display='none'; this.parentElement.innerHTML='ğŸ²';">`;
  } else {
    modalImage.textContent = 'ğŸ²';
  }
  
  // ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒªãƒ³ã‚¯ã®è¨­å®š
  document.getElementById('modalRulesLink').href   = baseUrl + game.rulesUrl;
  document.getElementById('modalSummaryLink').href = baseUrl + game.summaryUrl;
  
  document.getElementById('gameModal').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}

// ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
function closeModal() {
  document.getElementById('gameModal').style.display = 'none';
  document.body.style.overflow = 'auto';
}

// ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeModal();
  }
});
</script>