---
layout: default
title: ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ«ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
---

<div class="search-section">
  <input type="text" class="search-bar" placeholder="ã‚²ãƒ¼ãƒ åã§æ¤œç´¢..." id="searchInput">
  <div class="filter-buttons">
    <button class="filter-btn active" data-filter="all">ã™ã¹ã¦</button>
    <button class="filter-btn" data-filter="beginner">åˆå¿ƒè€…å‘ã‘</button>
    <button class="filter-btn" data-filter="intermediate">çµŒé¨“è€…å‘ã‘</button>
    <button class="filter-btn" data-filter="expert">ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆå‘ã‘</button>
  </div>
</div>

<div class="game-grid" id="gameGrid">
  {% for game in site.data.games.games %}
  <div class="game-card" data-difficulty="{{ game.difficulty }}" data-title="{{ game.title | downcase }}">
    <div class="game-image">
      {% if game.image %}
        <img src="/assets/images/{{ game.image }}" alt="{{ game.title }}" onerror="this.style.display='none'; this.parentElement.innerHTML='ğŸ²';">
      {% else %}
        ğŸ²
      {% endif %}
    </div>
    <div class="game-info">
      <div class="game-title">{{ game.title }}</div>
      <div class="game-difficulty difficulty-{{ game.difficulty }}">{{ game.difficultyText }}</div>
    </div>
    <div class="game-meta" style="display: none;">
      <span class="players">{{ game.players }}</span>
      <span class="time">{{ game.time }}</span>
      <span class="age">{{ game.age }}</span>
      <span class="description">{{ game.description }}</span>
      <span class="rules-url">{{ game.rulesUrl }}</span>
      <span class="summary-url">{{ game.summaryUrl }}</span>
    </div>
  </div>
  {% endfor %}
</div>

<!-- ã‚²ãƒ¼ãƒ è©³ç´°ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div id="gameModal" class="modal" style="display: none;">
  <div class="modal-overlay" onclick="closeModal()"></div>
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="modalTitle">ã‚²ãƒ¼ãƒ ã‚¿ã‚¤ãƒˆãƒ«</h2>
      <button class="close-btn" onclick="closeModal()">&times;</button>
    </div>
    <div class="modal-body">
      <div class="detail-header">
        <div class="detail-image" id="modalImage">ğŸ²</div>
        <div class="detail-info">
          <div class="meta-info">
            <p>ãƒ—ãƒ¬ã‚¤äººæ•°: <span id="modalPlayers">2-4äºº</span></p>
            <p>ãƒ—ãƒ¬ã‚¤æ™‚é–“: <span id="modalTime">30-60åˆ†</span></p>
            <p>å¯¾è±¡å¹´é½¢: <span id="modalAge">10æ­³ä»¥ä¸Š</span></p>
            <p>é›£æ˜“åº¦: <span id="modalDifficulty">åˆå¿ƒè€…å‘ã‘</span></p>
          </div>
        </div>
      </div>
      <div class="description" id="modalDescription">
        <p>ã‚²ãƒ¼ãƒ ã®èª¬æ˜ãŒã“ã“ã«å…¥ã‚Šã¾ã™ã€‚</p>
      </div>
      <div class="download-section">
        <h3>ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰</h3>
        <div class="download-links">
          <a href="#" class="download-btn" id="modalRulesLink">
            ğŸ“„ ãƒ«ãƒ¼ãƒ«å’Œè¨³ (PDF)
          </a>
          <a href="#" class="download-btn secondary" id="modalSummaryLink">
            ğŸ“‹ ã‚µãƒãƒªãƒ¼ã‚·ãƒ¼ãƒˆ (PDF)
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’JavaScriptã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«å¤‰æ›
const games = [
  {% for game in site.data.games.games %}
  {
    id: "{{ game.id }}",
    title: "{{ game.title }}",
    image: "{{ game.image }}",
    players: "{{ game.players }}",
    time: "{{ game.time }}",
    age: "{{ game.age }}",
    difficulty: "{{ game.difficulty }}",
    difficultyText: "{{ game.difficultyText }}",
    description: "{{ game.description | escape }}",
    rulesUrl: "{{ game.rulesUrl }}",
    summaryUrl: "{{ game.summaryUrl }}"
  }{% unless forloop.last %},{% endunless %}
  {% endfor %}
];

let currentFilter = 'all';
let searchTerm = '';

// æ¤œç´¢ã¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½
function filterGames() {
  const cards = document.querySelectorAll('.game-card');
  
  cards.forEach(card => {
    const title = card.dataset.title;
    const difficulty = card.dataset.difficulty;
    
    const matchesSearch = title.includes(searchTerm.toLowerCase());
    const matchesFilter = currentFilter === 'all' || difficulty === currentFilter;
    
    if (matchesSearch && matchesFilter) {
      card.style.display = 'block';
    } else {
      card.style.display = 'none';
    }
  });
}

// ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ã®å‡¦ç†
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    document.querySelector('.filter-btn.active').classList.remove('active');
    this.classList.add('active');
    currentFilter = this.dataset.filter;
    filterGames();
  });
});

// æ¤œç´¢ãƒãƒ¼ã®å‡¦ç†
document.getElementById('searchInput').addEventListener('input', function(e) {
  searchTerm = e.target.value;
  filterGames();
});

// ã‚²ãƒ¼ãƒ ã‚«ãƒ¼ãƒ‰ã‚¯ãƒªãƒƒã‚¯æ™‚ã®å‡¦ç†
document.querySelectorAll('.game-card').forEach(card => {
  card.addEventListener('click', function() {
    const title = this.querySelector('.game-title').textContent;
    const game = games.find(g => g.title === title);
    if (game) {
      showGameModal(game);
    }
  });
});

// ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
function showGameModal(game) {
  document.getElementById('modalTitle').textContent = game.title;
  document.getElementById('modalPlayers').textContent = game.players;
  document.getElementById('modalTime').textContent = game.time;
  document.getElementById('modalAge').textContent = game.age;
  document.getElementById('modalDifficulty').textContent = game.difficultyText;
  document.getElementById('modalDifficulty').className = `difficulty-${game.difficulty}`;
  document.getElementById('modalDescription').innerHTML = `<p>${game.description}</p>`;
  
  // ç”»åƒã®è¨­å®š
  const modalImage = document.getElementById('modalImage');
  if (game.image) {
    modalImage.innerHTML = `<img src="/assets/images/${game.image}" alt="${game.title}" onerror="this.style.display='none'; this.parentElement.innerHTML='ğŸ²';">`;
  } else {
    modalImage.textContent = 'ğŸ²';
  }
  
  document.getElementById('modalRulesLink').href = game.rulesUrl;
  document.getElementById('modalSummaryLink').href = game.summaryUrl;
  
  document.getElementById('gameModal').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}

// ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
function closeModal() {
  document.getElementById('gameModal').style.display = 'none';
  document.body.style.overflow = 'auto';
}

// ESCã‚­ãƒ¼ã§ãƒ¢ãƒ¼ãƒ€ãƒ«é–‰ã˜ã‚‹
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    closeModal();
  }
});
</script>